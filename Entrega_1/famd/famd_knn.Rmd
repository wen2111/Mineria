---
title: "famd"
author: "Laura Belmonte"
date: "2025-10-23"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
set.seed(123)
```

## Librerias 

```{r}
library("FactoMineR")
library("factoextra")
```

# Imputado
```{r}
# load("C:/Users/95409/OneDrive/ESTADISTICA/4r/1/MD/Mineria/DATA/dataaaaaaaaaaaaaa.RData")
data<-data_imputado
data <- data[data$group == "train", ]
data<- subset(data, select = -c(group))
#Ahora dividimos la base de datos en train i test 
train_index <- sample(1:nrow(data), 0.7 * nrow(data))
train <- data[train_index, ]
test  <- data[-train_index, ]
train <- train[,-1]
summary(train)
```

El análisis de datos mixtos mediante el método de Análisis Factorial de Datos Mixtos (FAMD, por sus siglas en inglés) es una técnica que permite analizar conjuntos de datos que contienen tanto variables cuantitativas como cualitativas. El FAMD combina elementos del Análisis de Componentes Principales (PCA) y el Análisis de Correspondencias Múltiples (MCA) para realizar esta tarea. Durante el análisis, se normalizan las variables cuantitativas y cualitativas para equilibrar su influencia. En este capítulo se presenta cómo realizar y visualizar el análisis factorial de datos mixtos utilizando los paquetes FactoMineR (para el análisis) y factoextra (para la visualización) en el entorno de programación R.

```{r}
head(train)
str(train)
```
Este data frame contiene 4900 observaciones y 24 variables que describen clientes bancarios, incluyendo características demográficas, financieras y de comportamiento.

En total tenemos un nuemro de 13 variables de tipo factor i 11 de tipo numerica. 

## FAMD 

```{r}
res.famd_imp <- FAMD(train,ncp = Inf, graph = FALSE)
print(res.famd_imp)
```


## Visualization & Results

```{r}
eig.val_imp <- get_eigenvalue(res.famd_imp)
eig.val_imp
famd_features_imp <- res.famd_imp$ind$coord
fviz_screeplot(res.famd_imp, addlabels = TRUE, ylim = c(0, 15)) +
  ggtitle("Varianza explicada por dimensión (FAMD)")
```

Para los datos imputados antes de aplicar elknn, se observa que se necesita un total de 19 dimensiones para explicar aproximar el 85% explicado de la variabilidad. 


# Reducido
```{r}
data<-data_reducida
#Ahora dividimos la base de datos en train i test 
train_index <- sample(1:nrow(data), 0.7 * nrow(data))
train <- data[train_index, ]
test  <- data[-train_index, ]
train <- train[,-3]
summary(train)
```

## FAMD 

```{r}
res.famd_red <- FAMD(train,ncp = Inf, graph = FALSE)
print(res.famd_red)
```

## Visualization & Results

```{r}
eig.val_red <- get_eigenvalue(res.famd_red)
eig.val_red
famd_features_red <- res.famd_red$ind$coord
fviz_screeplot(res.famd_red, addlabels = TRUE, ylim = c(0, 15)) +
  ggtitle("Varianza explicada por dimensión (FAMD)")
```

Para los datos reducidos antes de aplicar el knn, se observa que se necesita un total de 8 dimensiones para explicar aproximar el 100% explicado de la variabilidad. 

# Reducido plus

```{r}
data<-data_reducida_plus
data <- data[data$group == "train", ]
data<- subset(data, select = -c(group))
#Ahora dividimos la base de datos en train i test 
train_index <- sample(1:nrow(data), 0.7 * nrow(data))
train <- data[train_index, ]
test  <- data[-train_index, ]
train <- train[,-3]
summary(train)
```

## FAMD 

```{r}
res.famd_p <- FAMD(train,ncp = Inf, graph = FALSE)
print(res.famd_p)
```

## Visualization & Results

```{r}
eig.val_p <- get_eigenvalue(res.famd_p)
eig.val_p
famd_features_p <- res.famd_p$ind$coord
fviz_screeplot(res.famd_p, addlabels = TRUE, ylim = c(0, 15)) +
  ggtitle("Varianza explicada por dimensión (FAMD)")
```
Para los datos transformada antes de aplicar el knn, se observa que se necesita un total de 10 dimensiones para explicar aproximar el 85% explicado de la variabilidad.

# transformada
```{r}
data<-data_transformada
data <- data[data$group == "train", ]
data<- subset(data, select = -c(group))
#Ahora dividimos la base de datos en train i test 
train_index <- sample(1:nrow(data), 0.7 * nrow(data))
train <- data[train_index, ]
test  <- data[-train_index, ]
train <- train[,-1]
summary(train)
```

## FAMD 

```{r}
res.famd_t <- FAMD(train,ncp = Inf, graph = FALSE)
print(res.famd_t)
```

## Visualization & Results

```{r}
eig.val_t <- get_eigenvalue(res.famd_t)
eig.val_t
famd_features_t <- res.famd_t$ind$coord
fviz_screeplot(res.famd_t, addlabels = TRUE, ylim = c(0, 15)) +
  ggtitle("Varianza explicada por dimensión (FAMD)")
```
Para los datos transformada antes de aplicar el knn, se observa que se necesita un total de 20 dimensiones para explicar aproximar el 85% explicado de la variabilidad. 

```{r}
save.image("famd_data.Rdata")
```

